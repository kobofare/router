<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>请求流程</title>
  <link rel="stylesheet" href="../assets/style.css" />
</head>
<body>
  <header>
    <h1>请求流程</h1>
    <div class="search-row">
      <a href="../index.html">返回总览</a>
      <span> | </span>
      <a href="../../md/02_request_flow.md">打开对应 MD</a>
    </div>
  </header>
  <main>
    <section id="graph-panel">
      <h2>一句话</h2>
      <p>请求经 TokenAuth 鉴权、Distribute 选渠后进入 Relay，再由 adaptor 转发到上游。</p>
      <h2>关键入口</h2>
      <ul>
        <li>`internal/transport/http/router/relay.go:20-22` (TokenAuth + Distribute)</li>
        <li>`internal/transport/http/middleware/auth.go:155-352` (TokenAuth)</li>
        <li>`internal/transport/http/middleware/distributor.go:20-111` (Distribute)</li>
        <li>`internal/admin/controller/relay.go:51-97` (Relay)</li>
        <li>`internal/relay/controller/text.go:25-86` (RelayTextHelper)</li>
      </ul>
      <h2>流程节点提示</h2>
      <p>详细顺序与“默认 key/双 key 规则”见 MD。</p>
    </section>
  </main>
</body>
</html>
