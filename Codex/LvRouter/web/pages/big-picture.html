<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>全局总览</title>
  <link rel="stylesheet" href="../assets/style.css" />
</head>
<body>
  <header>
    <h1>全局总览</h1>
    <div class="search-row">
      <a href="../index.html">返回总览</a>
      <span> | </span>
      <a href="../../md/01_big_picture.md">打开对应 MD</a>
    </div>
  </header>
  <main>
    <section id="graph-panel">
      <h2>一句话</h2>
      <p>Router 以 TokenAuth → Distribute → Relay 为主线，完成鉴权、选渠、上游转发与健康管控。</p>
      <h2>关键入口</h2>
      <ul>
        <li>`cmd/router/main.go:1-6` (main)</li>
        <li>`internal/app/app.go:28-119` (Run)</li>
        <li>`internal/transport/http/router/main.go:18-47` (SetRouter)</li>
      </ul>
      <h2>模块索引</h2>
      <ul>
        <li>鉴权/令牌：`internal/transport/http/middleware/auth.go:155-352`</li>
        <li>选渠/路由：`internal/transport/http/middleware/distributor.go:20-111`</li>
        <li>转发执行：`internal/admin/controller/relay.go:51-97`</li>
        <li>健康监控：`internal/admin/monitor/manage.go:11-56`</li>
      </ul>
    </section>
  </main>
</body>
</html>
